<!DOCTYPE html>
<html>
<head>
	<title>CS61c Proj1_Spec</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">
	<link href="../../css/bootstrap.min.css" rel="stylesheet" media="screen">
	<link href='http://fonts.googleapis.com/css?family=Lato:300,400' rel='stylesheet' type='text/css'>
	<link href="style.css" rel="stylesheet">
	<link rel="shortcut icon" href="favicon.ico" type="image/icon">
	<script src="../../googleTracking.js"></script>
	<script src="../../jquery.min.js"></script>
	<script src="../../jquery-ui.min.js"></script>
    <script src="../../js/bootstrap.min.js"></script>
</head>

<!--////////////////////////// Facebook JS /////////////////////////-->

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1535854626680069&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<!--////////////////////////// Header /////////////////////////-->

  <body>
  	<div id="content_space">
  	    <div id="nav-wrapper">
	  		<div id="nav" data-spy="affix" data-offset-top="300" class="navbar navbar-default" role="navigation">
	  			<div class="container-fluid">
	  				<div class="navbar-header">
	  					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	  						<span class="sr-only">Toggle navigation</span>
	  						<span class="icon-bar"></span>
	  						<span class="icon-bar"></span>
	  						<span class="icon-bar"></span>
	  					</button>
	  					<a class="navbar-brand" href="#">Ollie O'Donnell</a>
	  				</div>
	  				<div class="collapse navbar-collapse">
	  					<ul class="nav navbar-nav">
	  						<li><a href="http://ollie-odonnell.com/proj1_spec">Setup and Introduction</a></li>
	  						<li><a href="http://ollie-odonnell.com/proj1_spec/1">Step 1</a></li>
	  						<li><a href="http://ollie-odonnell.com/proj1_spec/2">Step 2</a></li>
	  						<li><a href="http://ollie-odonnell.com/proj1_spec/3">Step 3</a></li>
	  						<li><a href="http://ollie-odonnell.com/proj1_spec/4">Step 4</a></li>
	  						<li><a href="http://ollie-odonnell.com/proj1_spec/5">Step 5</a></li>
	  						<li class="active"><a href="http://ollie-odonnell.com/proj1_spec/6">Step 6</a></li>
                <li><a href="http://ollie-odonnell.com/proj1_spec/Submission">Submission</a></li>
	  					</ul>
	  				</div>
	  			</div>
	  		</div>
	  	</div>


<div class="container-fluid resume">
  <div class="row">
	<div class="col-md-8 col-md-offset-2">

<!--////////////////////////// Content /////////////////////////-->

<h3>Step 6: Testing</h3>

  <p>You are responsible for testing your code. While we have provided a few test cases, they are by no means comprehensive. Fortunately, you have a variety of testing tools at your service.</p>

  <h3 class="miniheader">CUnit</h3>

  <p><b>Note: CUnit tests must be compiled on either the hive or the Soda 2nd floor machines, or you will get compilation errors.</b> We have set up some unit tests in <tt>test_assembler.c</tt>. You can run them by typing:</p>

  <pre>make test-assembler</pre>

  <p>Check out <a href="http://www-inst.eecs.berkeley.edu/~cs61c/sp15/hw/02/hw2.html">Homework 2</a> for a refresher on CUnit. You are encouraged to write more tests than the ones that we have given.</p>

  <h3 class="miniheader">Valgrind</h3>

  <p>You should use Valgrind to check whether your code has any memory leaks. We have included a file, <tt>run-valgrind</tt>, which will run Valgrind on any executable of your choosing. If you get a permission denied error, try changing adding the execute permission to the file:</p>

  <pre>chmod u+x run-valgrind</pre>

  <p>Then you can run by typing:</p>

  <pre>./run-valgrind &lt;whatever program you want to run&gt;</pre>

  <p>For example, you wanted to see whether running <tt>./assembler -p1 input/simple.s out/simple.int</tt> would cause any memory leaks, you should run <tt>./run-valgrind ./assembler -p1 input/simple.s out/simple.int</tt>.

  <h3 class="miniheader">MARS</h3>

  <p>Since you're writing an assembler, why not refer to an existing assembler? MARS is a powerful reference for you to use, and you are encouraged to write your own MIPS files and assemble them using MARS. </p>

  <p><b>Warning: in some cases the output of MARS will differ from the specifications of this project. You should always follow the specs.</b> This is because MARS 1) supports more pseudoinstructions, 2) has slightly different pseudoinstruction expansion rules, and 3) acts as an assembler and linker. For example, MARS may expand an <tt>addiu</tt> with a 32-bit immediate into <tt>li</tt> followed by an <tt>addiu</tt> instruction. Not only will the machine code be different, but the addresses of any labels will also be different. Therefore, you should always examine the assembled instructions carefully when testing with MARS.</p>

  <p>MARS also supports an assemble-only mode via the command-line (see <a href="http://courses.missouristate.edu/kenvollmar/mars/help/MarsHelpCommand.html">documentation here</a>). To save assembled output to a text file, run:<p>

  <pre>mars a dump .text HexText &lt;output location&gt; &lt;input MIPS file&gt;</pre>

  <h3 class="miniheader">Diff</h3>

  <p><tt>diff</tt> is a utility for comparing the contents of files. Running the following command will print out the differences between <tt>file1</tt> and <tt>file2</tt>:</p>

  <pre>diff &lt;file1&gt; &lt;file2&gt;</pre>

  <p>To see how to interpret diff results, <a href="http://en.wikipedia.org/wiki/Diff_utility#Usage">click here</a>. We have provided some sample input-output pairs (again, these are not comprehensive tests) located in the <tt>input</tt> and <tt>out/ref</tt> directories respectively. For example, to check the output of running <tt>simple.s</tt> on your assembler against the expected output, run:</p>

  <pre>
./assembler input/simple.s out/simple.int out/simple.out 
diff out/simple.out out/ref/simple_ref.out</pre>

  <h2>Running the Assembler</h2>

  <p>First, make sure your assembler executable is up to date by running <tt>make</tt>.</p>

  <p>By default, the assembler runs two passes. The first pass reads an input file and translates it into an intermediate file. The second pass reads the intermediate file and translates it into an output file. To run both passes, type:</p>

  <pre>./assembler &lt;input file&gt; &lt;intermediate file&gt; &lt;output file&gt;</pre>

  <p>Alternatively, you can run only a single pass, which may be helpful while debugging. To run only the first pass, use the <tt>-p1</tt> flag:</p>

  <pre>./assembler &lt;-p1&gt; &lt;input file&gt; &lt;intermediate file&gt;</pre>

  <p>To run only the second pass, use the <tt>-p2</tt> flag:</p>

  <pre>./assembler &lt;-p2&gt; &lt;intermediate file&gt; &lt;output file&gt;</pre>

  <p>When testing cases that should produce error messages, you may want to use the <tt>-log</tt> flag to log error messages to a text file. The <tt>-log</tt> flag should be followed with the location of the output file (WARNING: old contents will be overwritten!), and it can be used with any of the three modes above. Expected outputs for error messages are in the <tt>log/ref</tt> directory. For example, to test the error messages you get while running <tt>p1_error.s</tt> against what's expected, run:</p>

    <pre>
./assembler -p1 input/p1_errors.s out/p1_errors.int -log log/p1_errors.txt
diff log/p1_errors.txt log/ref/p1_errors_ref.txt</pre>

    <div class="fb-comments" data-href="http://ollie-odonnell.com/proj1_spec/6" data-numposts="5" data-colorscheme="light"></div>

<!--////////////////////////// Content /////////////////////////-->

	</div>
 </div>
</div>
</body>
</html>